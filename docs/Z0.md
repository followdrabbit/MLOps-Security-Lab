# Z0 — Data Sources (External, Partner & Internal Producers)

![Diagram](../assets/Project_Diagram-Z0.drawio.svg)

## 1. Papel da Z0 no MLOps Security Lab

**Z0 é o ponto de partida lógico de todos os dados** que podem vir a alimentar o pipeline de IA/ML/LLM.

No contexto do **MLOps Security Lab**:

* Representa **fontes externas, parceiras e internas**, antes de cruzarem qualquer controle do lab.
* É tratada como **zona de risco**, não como zona de confiança.
* Conecta diretamente com a linha do README:

> “Z0 — Fontes externas, parceiras e internas → Riscos: data poisoning, arquivos malformados → Controles: allowlist, schema/MIME, validação de origem.”

**Princípio chave do lab:**
Nenhum dado de Z0 é considerado confiável por default. A confiança só começa a ser construída em **Z1 (Ingestion & Security Gateway)**.

---

## 2. Componentes da Z0

Dividimos Z0 em dois grandes grupos, ambos vistos sob a ótica **zero trust / risk-based**.

### 2.1. External & Partner Sources (Untrusted)

Usados para simular o mundo real no lab:

* **Clientes / Apps Externos**

  * Requisições HTTP / APIs públicas simuladas.
  * Uploads de arquivos (ex.: PDF, CSV) e eventos de uso.
* **Parceiros / Bureaus / Open Finance**

  * Feeds simulados de bureau, open finance, listas de sanções, etc.
  * Tratados como *terceiros* no modelo de risco.
* **Fontes Públicas / OSINT / Open Data**

  * Datasets públicos (governo, mercado, etc.) usados como mock.
  * Potencialmente ruidosos, desatualizados ou manipuláveis.

**No lab:** representados por scripts, arquivos de exemplo, requisições geradas artificialmente — mas sempre documentados como **não confiáveis**.

---

### 2.2. Internal Producers (Conditionally Trusted)

Fontes internas do próprio ambiente, que no mundo real viriam de sistemas legados/bancários:

* **Core Banking / Risk / Fraud / CRM / Canais**

  * Eventos de transação, scores existentes, alertas, histórico.
* **Data Warehouse / Data Marts / Relatórios**

  * Bases consolidadas usadas como entrada para modelos.
* **Security & Ops Telemetry**

  * Logs, métricas, eventos de segurança.

**No lab:** podem ser simulados via:

* bancos de dados locais (Postgres),
* arquivos CSV/Parquet,
* tasks de Airflow/ETL que geram dados sintéticos.

Mesmo sendo “internos”, **não têm passe livre**: qualquer fluxo em direção ao pipeline deve seguir as mesmas regras de borda (passar por Z1).

---

## 3. Riscos em Z0 (focados no contexto do lab)

Z0 é onde você explicita de onde pode vir problema. Alguns riscos que o lab ajuda a enxergar:

1. **Data Poisoning (intencional ou acidental)**

   * Dados manipulados por clientes, parceiros ou sistemas internos comprometidos.
   * Impacta diretamente a qualidade e integridade de modelos.
2. **Arquivos malformados ou maliciosos**

   * Uploads contendo conteúdo inesperado, binários, macro, payloads.
   * Vetor de malware, exploração de parser, ou quebra de pipeline.
3. **Dados sensíveis fora de escopo**

   * PII desnecessária,
   * dados que não deveriam ser usados para treino (LGPD / regulatório),
   * combinação de atributos que aumenta risco de reidentificação.
4. **Falta de proveniência e contrato**

   * Sem saber quem gerou, quando, como, sob qual regra.
   * Dificulta explicabilidade, auditoria e resposta a incidentes.
5. **Dependência fraca de terceiros**

   * Fontes externas sem SLA, sem garantias de integridade/qualidade.
6. **Shadow data / integrações paralelas**

   * Dumps diretos, bypass da camada de ingestão segura.
   * No lab: isso é explicitamente tratado como padrão indevido.

---

## 4. Controles esperados para Z0 (ligados ao lab e à tabela Z0)

A Z0, por si só, **não implementa controles**, mas define **obrigações** para quem produz dados.

Os **controles efetivos são aplicados na Z1**, mas Z0 precisa estar alinhada com:

1. **Allowlist de fontes e canais oficiais**

   * Apenas endpoints, tópicos, buckets e integrações pré-definidas podem alimentar o pipeline.
   * No lab: isso será refletido em configurações explícitas (ex.: apenas certas rotas do reverse proxy, apenas certos paths/buckets).
2. **Contratos de Schema e Formato**

   * Definição clara de:

     * campos esperados,
     * tipos,
     * formatos de data/numérico,
     * ranges plausíveis.
   * Serve de base para validações em Z1.
3. **Validação de origem**

   * Toda fonte deve:

     * ser autenticada (chaves, tokens, OIDC, mTLS quando aplicável),
     * ser documentada (catálogo de fontes).
4. **Classificação e finalidade de uso**

   * Identificar se os dados são:

     * público, interno, confidencial, sensível,
     * e qual o propósito autorizado (treino, monitoramento, antifraude etc.).
   * No lab: isso aparece nos exemplos de metadata, nas boas práticas descritas e nos comentários dos docs.

**Resumindo no padrão do README:**
Para Z0 → “Riscos: data poisoning, arquivos malformados. Controles: allowlist, schema/MIME, validação de origem (implementados na borda, Z1).”

---

## 5. Teoria ↔ Prática (como Z0 se conecta aos Docs do lab)

Ainda que os Docs 01–07 não sejam “sobre Z0”, eles dão base para que Z0 seja tratada corretamente:

* **01 / 03 / 05 — Vault, OIDC, IAM**

  * Garantem identidade forte e entrega segura de segredos para serviços que consomem fontes.
* **02 — Core Infra & Segurança**

  * Garante que apenas caminhos oficiais (reverse proxy, portas definidas) existam para ingestão.
* **04 — Airflow / MLflow / FastAPI**

  * Tasks de ingestão no Airflow podem representar fontes Z0 com:

    * conexões autenticadas,
    * validações de formato,
    * uso de credenciais seguras via Vault.
* **06 — CI/CD seguro**

  * Garante que qualquer componente que consome fontes Z0 seja construído com segurança (SAST, SBOM, policies).

Quando você escrever os tutoriais do lab, sempre deixe claro:

* “Esta fonte de dados representa uma origem Z0”,
* “Ela só é aceita porque passa pelas verificações definidas em Z1”.

---

## 6. Alinhamento com Frameworks (no estilo do README)

Mantendo o tom do projeto: **NIST-style risk-based + OWASP + CSA (AICM)**.

Use Z0 para mostrar que você está mapeando riscos desde a origem:

* **OWASP Top 10 / OWASP API Security**

  * Segurança dos aplicativos que geram dados (injeção, auth quebrada, etc.).
* **OWASP LLM / GenAI**

  * Se LLM for usado para coletar/anotar dados, trate como fonte não confiável: risco de prompt injection/exfiltração.
* **CSA AI Controls Matrix (AICM)**

  * Domínios sobre:

    * data provenance,
    * third-party management,
    * governance de dados de treino.
* **NIST-style (AI RMF / 800-53)**

  * Terceiros (SA-9, SR-*),
  * proteção de comunicações (SC-*),
  * auditoria (AU-*),
  * integridade (SI-7),
  * tudo pensado desde a origem.
* **Princípios bancários**

  * Zero trust,
  * “Somente canais oficiais”,
  * “Sem dado sem dono”.
